{"is_source_file": true, "format": "JavaScript/React JSX", "description": "This file defines the React component 'AuthCallback' which handles OAuth redirect callbacks from Supabase. It manages parsing URL parameters, checking session state, subscribing to auth state changes, error handling, and navigation post sign-in.", "external_files": ["../lib/supabaseClient", "../components/ToastProvider", "react", "react-router-dom"], "external_methods": ["getSupabase", "useToast", "useLocation", "useNavigate"], "published": ["AuthCallback"], "classes": [], "methods": [{"name": "parseHashParams", "description": "Parses the URL hash fragment as query parameters."}, {"name": "cleanupUrl", "description": "Removes auth-related parameters from the URL to clean up after processing."}, {"name": "finalize()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["supabase.auth.getSession", "supabase.auth.onAuthStateChange", "window.history.replaceState", "setTimeout", "clearTimeout", "addToast", "navigate"], "search-terms": ["AuthCallback", "Supabase OAuth redirect", "react-router-dom", "auth state management", "OAuth error handling", "React useEffect auth", "session restoration"], "state": 2, "file_id": 32, "knowledge_revision": 97, "git_revision": "1e366df991f2667ce08269ea94f4d99b9dd5605a", "revision_history": [{"89": ""}, {"94": "8d06876624b4edb169890ad1d2d21af01bd94d6d"}, {"95": "8d06876624b4edb169890ad1d2d21af01bd94d6d"}, {"97": "1e366df991f2667ce08269ea94f4d99b9dd5605a"}], "ctags": [{"_type": "tag", "name": "AuthCallback", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^const AuthCallback = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cleanupUrl", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const cleanupUrl = React.useCallback(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "finalize", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^    async function finalize() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hashParams", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const hashParams = parseHashParams(location.hash || '');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "location", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const location = useLocation();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "log", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const log = (level, ...args) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "navigate", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const navigate = useNavigate();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "oauthError", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const oauthError =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "oauthErrorDesc", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const oauthErrorDesc =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "parseHashParams", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const parseHashParams = React.useCallback((hash) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "redirectParam", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const redirectParam =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "retryHref", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const retryHref = `\\/login?redirect=${encodeURIComponent(redirectParam)}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const search = new URLSearchParams(location.search || '');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setChecking", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const [checking, setChecking] = React.useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const [error, setError] = React.useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/AuthCallback.jsx", "pattern": "/^  const supabase = getSupabase();$/", "language": "JavaScript", "kind": "constant"}], "hash": "1239d84f5a93067063d7851363469853", "format-version": 4, "code-base-name": "weekly_report_frontend", "filename": "weekly_report_frontend/src/pages/AuthCallback.jsx"}