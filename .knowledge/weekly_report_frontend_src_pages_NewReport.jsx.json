{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file is a React component named 'NewReport' that renders a weekly report submission form, manages form state, performs validation, and interacts with services and context to submit data to a backend (Supabase). It includes various UI elements, state hooks, and effects tailored for the report submission process.", "external_files": ["../lib/supabaseClient", "../components/ConfigWarning", "../context/AuthContext", "../services/reportsService", "../components/ToastProvider", "../utils/cn", "../lib/featureFlags"], "external_methods": ["getSupabaseConfigStatus", "useAuth", "createWeeklyReport", "useToast", "cn", "isAuthDisabled"], "published": ["NewReport"], "classes": [], "methods": [{"name": "hasRequiredContent", "description": "Checks if the form has the minimum required content to enable submission, specifically ensuring weekStart, accomplishments, and nextPlan are provided and meet length requirements."}, {"name": "validate", "description": "Performs validation checks on form fields, ensuring required fields are filled with appropriate length, and sets error messages accordingly."}, {"name": "onSubmit", "description": "Handles form submission, including validation, configuration checks, session checks, calling the report creation service, handling success and errors, and updating UI state."}], "calls": ["getSupabaseConfigStatus()", "useAuth()", "createWeeklyReport()", "useToast()", "cn()"], "search-terms": ["NewReport React component", "weekly report form", "Supabase integration", "report submission", "validation logic", "useAuth hook", "createWeeklyReport function"], "state": 2, "file_id": 18, "knowledge_revision": 76, "git_revision": "aee7a9e0bada63095fac8760908ace3d11f90592", "revision_history": [{"42": ""}, {"59": "f5d73332335287d385642d255e103dc455313f1a"}, {"74": "4e4895308af0bc6e23fc794ab94125fd51c60a36"}, {"76": "aee7a9e0bada63095fac8760908ace3d11f90592"}], "ctags": [{"_type": "tag", "name": "10", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            minLength={10}$/", "language": "JavaScript", "kind": "field", "scope": "minLength", "scopeKind": "class"}, {"_type": "tag", "name": "NewReport", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^const NewReport = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "acc", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^    const acc = accomplishments.trim();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "accomplishments", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            value={accomplishments}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "authDisabled", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const authDisabled = isAuthDisabled();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "blockers", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            value={blockers}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "disableSubmit", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            disabled={disableSubmit}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "disableSubmit", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const disableSubmit =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            aria-describedby={errors.accomplishments ? 'accomplishments-error' : undefined}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            aria-describedby={errors.nextPlan ? 'nextPlan-error' : undefined}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            aria-describedby={errors.weekStart ? 'weekStart-error' : undefined}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "hasRequiredContent", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const hasRequiredContent = React.useCallback(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "inserted", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^      const inserted = await createWeeklyReport({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "minLen", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^    const minLen = 10;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "nextErrors", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^    const nextErrors = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "nextPlan", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            value={nextPlan}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "onSubmit", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const onSubmit = async (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "plan", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^    const plan = nextPlan.trim();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setAccomplishments", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [accomplishments, setAccomplishments] = React.useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setBlockers", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [blockers, setBlockers] = React.useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setErrors", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [errors, setErrors] = React.useState({}); \\/\\/ { fieldName: 'message' }$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setNextPlan", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [nextPlan, setNextPlan] = React.useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setStatus", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [status, setStatus] = React.useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSubmitting", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [submitting, setSubmitting] = React.useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setTagsInput", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [tagsInput, setTagsInput] = React.useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setWeekStart", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const [weekStart, setWeekStart] = React.useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "submitting", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            aria-busy={submitting ? 'true' : 'false'}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "tagsInput", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            value={tagsInput}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "validate", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^  const validate = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "weekStart", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/pages/NewReport.jsx", "pattern": "/^            value={weekStart}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}], "hash": "3aa7caf72d65084696aea018a400e33a", "format-version": 4, "code-base-name": "weekly_report_frontend", "filename": "weekly_report_frontend/src/pages/NewReport.jsx", "fields": [{"name": "minLength={10}", "scope": "minLength", "scopeKind": "class", "description": "unavailable"}, {"name": "value={accomplishments}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "value={blockers}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={disableSubmit}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-describedby={errors.accomplishments ? 'accomplishments-error' : undefined}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-describedby={errors.nextPlan ? 'nextPlan-error' : undefined}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-describedby={errors.weekStart ? 'weekStart-error' : undefined}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "value={nextPlan}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-busy={submitting ? 'true' : 'false'}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "value={tagsInput}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "value={weekStart}", "scope": "value", "scopeKind": "class", "description": "unavailable"}]}