{"is_source_file": true, "format": "JavaScript", "description": "This file defines a centralized API client for a frontend web application. It includes functions for constructing API URLs, obtaining authentication tokens via Supabase, and performing HTTP requests (GET, POST, OPTIONS) with appropriate headers and error handling.", "external_files": ["../lib/supabaseClient"], "external_methods": ["getSupabase()"], "published": ["getApiBase", "getAuthToken", "apiGet", "apiPost", "apiOptions"], "classes": [], "methods": [{"name": "getApiBase()", "description": "Returns the configured backend API base URL from environment variables or a default fallback.", "scope": "", "scopeKind": ""}, {"name": "getAuthToken()", "description": "Retrieves the current authentication access token from Supabase session, if available.", "scope": "", "scopeKind": ""}, {"name": "buildUrl(path, params)", "description": "Internal function to assemble full API URL from path and query parameters.", "scope": "", "scopeKind": ""}, {"name": "buildHttpError(method, path, res, bodyText)", "description": "Creates an Error object representing a failed HTTP response with status and body info.", "scope": "", "scopeKind": ""}, {"name": "buildHeaders(extra)", "description": "Prepares HTTP headers, including Authorization if an auth token is available.", "scope": "", "scopeKind": ""}, {"name": "apiGet(path, { params, headers, credentials } = {})", "description": "Performs a GET request to the API with authorization and error handling.", "scope": "", "scopeKind": ""}, {"name": "apiPost(path, body, { headers, credentials } = {})", "description": "Performs a POST request to the API with JSON body, headers, and authorization.", "scope": "", "scopeKind": ""}, {"name": "apiOptions(path, { params, headers } = {})", "description": "Performs an OPTIONS request to discover allowed HTTP methods at an endpoint.", "scope": "", "scopeKind": ""}], "calls": ["getSupabase()", "buildUrl()", "buildHeaders()", "fetch()", "res.headers.get()", "res.json()", "res.text()"], "search-terms": ["apiClient", "API base URL", "Supabase auth", "token retrieval", "fetch API wrapper", "Authorization header", "public API methods", "error handling", "frontend API client"], "state": 2, "file_id": 38, "knowledge_revision": 193, "git_revision": "fb394b58d9ded179214110229d3dfe7efce3f5f5", "revision_history": [{"178": "48a4eb29ba26ac67e8d444d1f67366d2b79446d6"}, {"187": "afe2eee2da7bfab0883f67047916643f419818a5"}, {"191": "fb394b58d9ded179214110229d3dfe7efce3f5f5"}, {"192": "fb394b58d9ded179214110229d3dfe7efce3f5f5"}, {"193": "fb394b58d9ded179214110229d3dfe7efce3f5f5"}], "ctags": [{"_type": "tag", "name": "Accept", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^    Accept: 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "buildHeaders.headers", "scopeKind": "class"}, {"_type": "tag", "name": "apiGet", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^export async function apiGet(path, { params, headers, credentials } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { params, headers, credentials } = {})"}, {"_type": "tag", "name": "apiOptions", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^export async function apiOptions(path, { params, headers } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { params, headers } = {})"}, {"_type": "tag", "name": "apiPost", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^export async function apiPost(path, body, { headers, credentials } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, body, { headers, credentials } = {})"}, {"_type": "tag", "name": "buildHeaders", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^async function buildHeaders(extra) {$/", "language": "JavaScript", "kind": "function", "signature": "(extra)"}, {"_type": "tag", "name": "buildHttpError", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^function buildHttpError(method, path, res, bodyText) {$/", "language": "JavaScript", "kind": "function", "signature": "(method, path, res, bodyText)"}, {"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^function buildUrl(path, params) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, params)"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^export function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getAuthToken", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^export async function getAuthToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/services/apiClient.js", "pattern": "/^  const headers = {$/", "language": "JavaScript", "kind": "class", "scope": "buildHeaders", "scopeKind": "class"}], "hash": "24dd6bdf42b23452ea25d220473addc2", "format-version": 4, "code-base-name": "weekly_report_frontend", "filename": "weekly_report_frontend/src/services/apiClient.js", "fields": [{"name": "Accept: 'application\\/json',", "scope": "buildHeaders.headers", "scopeKind": "class", "description": "unavailable"}]}