{"is_source_file": true, "format": "JavaScript (Node.js script)", "description": "This file is a Node.js script for managing user roles via the Supabase Admin API. It provides command-line interface (CLI) functionality to set or update a user's application role, optionally syncing the data into a public profiles table. The script handles user lookup by email or user ID and performs role assignment with safety checks for environment variables and input validity.", "external_files": ["@supabase/supabase-js"], "external_methods": ["require('@supabase/supabase-js').createClient"], "published": [], "classes": [], "methods": [{"name": "parseArgs(argv)", "description": "Parses command-line arguments given to the script, interpreting flags and options.", "scope": "", "scopeKind": ""}, {"name": "exitWithError(message, code = 1)", "description": "Logs an error message and terminates the script with the specified exit code.", "scope": "", "scopeKind": ""}, {"name": "logInfo(message, ...rest)", "description": "Logs informational messages to the console for progress tracking.", "scope": "", "scopeKind": ""}, {"name": "main()", "description": "Main async function that orchestrates the user role setting and profile synchronization based on CLI input.", "scope": "", "scopeKind": ""}], "calls": ["require('@supabase/supabase-js').createClient", "supabase.auth.admin.listUsers", "supabase.auth.admin.updateUserById", "supabase.from('profiles').upsert"], "search-terms": ["setUserRole.js", "Supabase Admin API", "role management script", "user update script", "command-line user role updater", "profile upsert", "supabase auth.admin"], "state": 2, "file_id": 35, "knowledge_revision": 110, "git_revision": "", "ctags": [{"_type": "tag", "name": "exitWithError", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^function exitWithError(message, code = 1) {$/", "language": "JavaScript", "kind": "function", "signature": "(message, code = 1)"}, {"_type": "tag", "name": "logInfo", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^function logInfo(message, ...rest) {$/", "language": "JavaScript", "kind": "function", "signature": "(message, ...rest)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^async function main() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "parseArgs", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^function parseArgs(argv) {$/", "language": "JavaScript", "kind": "function", "signature": "(argv)"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^        const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "main", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^          role: roleInput,$/", "language": "JavaScript", "kind": "property", "scope": "main.payload", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/scripts/setUserRole.js", "pattern": "/^          user_id: targetUserId,$/", "language": "JavaScript", "kind": "property", "scope": "main.payload", "scopeKind": "class"}], "hash": "28ac22a31a6b767ce05947b9717d96dd", "format-version": 4, "code-base-name": "weekly_report_frontend", "filename": "weekly_report_frontend/scripts/setUserRole.js", "fields": [{"name": "role: roleInput,", "scope": "main.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id: targetUserId,", "scope": "main.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"110": ""}]}