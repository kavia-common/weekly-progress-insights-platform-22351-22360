{"is_source_file": true, "format": "JavaScript/JSX", "description": "This file defines a React context and provider component for authentication and team management, interfacing with Supabase for authentication and user profile data. It provides hooks and context for managing user session, roles, and team selection within a React application.", "external_files": ["../lib/supabaseClient", "../services/teamService"], "external_methods": ["getSupabase", "getStoredTeam", "storeTeamLocal", "clearStoredTeam", "setUserTeam", "hasTeamApi"], "published": ["AuthContext", "useAuth"], "classes": [], "methods": [{"name": "deriveRoleFromUser(user)", "description": "Infers a user role string based on the user object, prioritizing metadata and heuristics.", "scope": "", "scopeKind": ""}, {"name": "AuthProvider({ children })", "description": "React component that provides authentication state, user info, roles, and team management via context, handling auth state changes and profile data.", "scope": "", "scopeKind": ""}, {"name": "initSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "useAuth()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["React.createContext", "React.useContext", "React.useState", "React.useCallback", "React.useEffect", "react.useMemo", "supabase.auth.getSession", "supabase.auth.onAuthStateChange", "supabase.from('profiles').select", "hasTeamApi", "apiSetUserTeam", "clearStoredTeam", "storeTeamLocal", "supabase.auth.signOut"], "search-terms": ["AuthContext", "useAuth", "AuthProvider", "supabase", "profile lookup", "role derivation", "team selection", "React context for auth", "session management"], "state": 2, "file_id": 80, "knowledge_revision": 284, "git_revision": "1b2c4438edf18fb54588673a7cf6a8f18b850fd0", "ctags": [{"_type": "tag", "name": "AuthContext", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/context/AuthContext.jsx", "pattern": "/^export const AuthContext = React.createContext({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "AuthProvider", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/context/AuthContext.jsx", "pattern": "/^export function AuthProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "deriveRoleFromUser", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/context/AuthContext.jsx", "pattern": "/^function deriveRoleFromUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "initSession", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/context/AuthContext.jsx", "pattern": "/^    async function initSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "useAuth", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/context/AuthContext.jsx", "pattern": "/^export function useAuth() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/weekly-progress-insights-platform-22351-22360/weekly_report_frontend/src/context/AuthContext.jsx", "pattern": "/^  return <AuthContext.Provider value={value}>{children}<\\/AuthContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}], "hash": "ba58bec522888f9e36559142fc10799f", "format-version": 4, "code-base-name": "weekly_report_frontend", "filename": "weekly_report_frontend/src/context/AuthContext.jsx", "fields": [{"name": "return <AuthContext.Provider value={value}>{children}<\\/AuthContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"284": "1b2c4438edf18fb54588673a7cf6a8f18b850fd0"}]}